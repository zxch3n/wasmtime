<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wasmtime: Wasmtime C API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Wasmtime
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Wasmtime C API </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >This documentation is an overview and API reference for the C API of Wasmtime. The C API is spread between three different header files:</p>
<ul>
<li><a class="el" href="wasmtime_8h.html">wasmtime.h</a></li>
<li><a class="el" href="wasi_8h.html">wasi.h</a></li>
<li><a class="el" href="wasm_8h.html">wasm.h</a></li>
</ul>
<p >The <a class="el" href="wasmtime_8h.html">wasmtime.h</a> header file includes all the other header files and is the main header file you'll likely be using. The <a class="el" href="wasm_8h.html">wasm.h</a> header file comes directly from the <a href="https://github.com/WebAssembly/wasm-c-api">WebAssembly/wasm-c-api</a> repository, and at this time the upstream header file does not have documentation so Wasmtime provides documentation here. It should be noted some semantics may be Wasmtime-specific and may not be portable to other engines.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Installing the C API</h2>
<p >To install the C API from precompiled binaries you can download the appropriate binary from the <a href="https://github.com/bytecodealliance/wasmtime/releases">releases page of Wasmtime</a>. Artifacts for the C API all end in "-c-api" for the filename.</p>
<p >Each archive contains an <code>include</code> directory with necessary headers, as well as a <code>lib</code> directory with both a static archive and a dynamic library of Wasmtime. You can link to either of them as you see fit.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Installing the C API through CMake</h2>
<p >CMake can be used to make the process of linking and compiling easier. An example of this if you have wasmtime as a git submodule at <code>third_party/wasmtime</code>: </p><div class="fragment"><div class="line">add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/third_party/wasmtime/crates/c-api</div>
<div class="line">${CMAKE_CURRENT_BINARY_DIR}/wasmtime)</div>
<div class="line">...</div>
<div class="line">target_include_directories(YourProject PUBLIC wasmtime)</div>
<div class="line">target_link_libraries(YourProject PUBLIC wasmtime)</div>
</div><!-- fragment --><p> <code>BUILD_SHARED_LIBS</code> is provided as a define if you would like to build a shared library instead. You must distribute the appropriate shared library for your platform if you do this.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Linking against the C API</h2>
<p >You'll want to arrange the <code>include</code> directory of the C API to be in your compiler's header path (e.g. the <code>-I</code> flag). If you're compiling for Windows and you're using the static library then you'll also need to pass <code>-DWASM_API_EXTERN=</code> and <code>-DWASI_API_EXTERN=</code> to disable dllimport.</p>
<p >Your final artifact can then be linked with <code>-lwasmtime</code>. If you're linking against the static library you may need to pass other system libraries depending on your platform:</p>
<ul>
<li>Linux - <code>-lpthread -ldl -lm</code></li>
<li>macOS - no extra flags needed</li>
<li>Windows - <code>ws2_32.lib advapi32.lib userenv.lib ntdll.lib shell32.lib ole32.lib bcrypt.lib</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md5"></a>
Building from Source</h2>
<p >The C API is located in the <a href="https://github.com/bytecodealliance/wasmtime/tree/main/crates/c-api"><code>crates/c-api</code></a> directory of the <a href="https://github.com/bytecodealliance/wasmtime">Wasmtime repository</a>. To build from source you'll need a Rust compiler and a checkout of the <code>wasmtime</code> project. Afterwards you can execute:</p>
<div class="fragment"><div class="line">$ cargo build --release -p wasmtime-c-api</div>
</div><!-- fragment --><p >This will place the final artifacts in <code>target/release</code>, with names depending on what platform you're compiling for.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Other resources</h2>
<p >Some other handy resources you might find useful when exploring the C API documentation are:</p>
<ul>
<li><a href="https://bytecodealliance.github.io/wasmtime/api/wasmtime/">Rust <code>wasmtime</code> crate documentation</a> - although this documentation is for Rust and not C, you'll find that many functions mirror one another and there may be extra documentation in Rust you find helpful. If you find yourself having to frequently do this, though, please feel free to <a href="https://github.com/bytecodealliance/wasmtime/issues/new">file an issue</a>.</li>
<li><a href="https://bytecodealliance.github.io/wasmtime/examples-c-embed.html">C embedding examples</a> are available online and are tested from the Wasmtime repository itself.</li>
<li><a href="https://bytecodealliance.github.io/wasmtime/contributing.html">Contribution documentation for Wasmtime</a> in case you're interested in helping out! </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
