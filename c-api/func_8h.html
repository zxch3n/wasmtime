<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wasmtime: func.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Wasmtime
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('func_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">func.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="wasm_8h_source.html">wasm.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="val_8h_source.html">wasmtime/val.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="store_8h_source.html">wasmtime/store.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="extern_8h_source.html">wasmtime/extern.h</a>&gt;</code><br />
</div>
<p><a href="func_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:abad1840db69084f226feec107cc23d5e"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structwasmtime__caller.html">wasmtime_caller</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="func_8h.html#abad1840db69084f226feec107cc23d5e">wasmtime_caller_t</a></td></tr>
<tr class="memdesc:abad1840db69084f226feec107cc23d5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alias to <a class="el" href="structwasmtime__caller.html">wasmtime_caller</a>.  <a href="func_8h.html#abad1840db69084f226feec107cc23d5e">More...</a><br /></td></tr>
<tr class="separator:abad1840db69084f226feec107cc23d5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af90ff6b594f05f23e381ac16c22b70cf"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structwasm__trap__t.html">wasm_trap_t</a> *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="func_8h.html#af90ff6b594f05f23e381ac16c22b70cf">wasmtime_func_callback_t</a>) (void *env, <a class="el" href="func_8h.html#abad1840db69084f226feec107cc23d5e">wasmtime_caller_t</a> *caller, const <a class="el" href="val_8h.html#a97038492e2cc547de6c95cf597453353">wasmtime_val_t</a> *args, size_t nargs, <a class="el" href="val_8h.html#a97038492e2cc547de6c95cf597453353">wasmtime_val_t</a> *results, size_t nresults)</td></tr>
<tr class="memdesc:af90ff6b594f05f23e381ac16c22b70cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback signature for <a class="el" href="func_8h.html#a7b9dd547669d807c226857f2613c8ff5" title="Creates a new host-defined function.">wasmtime_func_new</a>.  <a href="func_8h.html#af90ff6b594f05f23e381ac16c22b70cf">More...</a><br /></td></tr>
<tr class="separator:af90ff6b594f05f23e381ac16c22b70cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9afb34f17cdd2a7416514a5270e1c746"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structwasm__trap__t.html">wasm_trap_t</a> *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="func_8h.html#a9afb34f17cdd2a7416514a5270e1c746">wasmtime_func_unchecked_callback_t</a>) (void *env, <a class="el" href="func_8h.html#abad1840db69084f226feec107cc23d5e">wasmtime_caller_t</a> *caller, <a class="el" href="val_8h.html#a551b6edd7003e8d98ef5d90e54e05c26">wasmtime_val_raw_t</a> *args_and_results, size_t num_args_and_results)</td></tr>
<tr class="memdesc:a9afb34f17cdd2a7416514a5270e1c746"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback signature for <a class="el" href="func_8h.html#ae4de5e8a5fe28d952339fc33396527a9" title="Creates a new host function in the same manner of wasmtime_func_new, but the function-to-call has no ...">wasmtime_func_new_unchecked</a>.  <a href="func_8h.html#a9afb34f17cdd2a7416514a5270e1c746">More...</a><br /></td></tr>
<tr class="separator:a9afb34f17cdd2a7416514a5270e1c746"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7b9dd547669d807c226857f2613c8ff5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="func_8h.html#a7b9dd547669d807c226857f2613c8ff5">wasmtime_func_new</a> (<a class="el" href="store_8h.html#a98d503c153853bb098689a122109de81">wasmtime_context_t</a> *store, const <a class="el" href="structwasm__functype__t.html">wasm_functype_t</a> *type, <a class="el" href="func_8h.html#af90ff6b594f05f23e381ac16c22b70cf">wasmtime_func_callback_t</a> callback, void *env, void(*finalizer)(void *), <a class="el" href="extern_8h.html#ac3661fabd7972df1ade869f17de29dc5">wasmtime_func_t</a> *ret)</td></tr>
<tr class="memdesc:a7b9dd547669d807c226857f2613c8ff5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new host-defined function.  <a href="func_8h.html#a7b9dd547669d807c226857f2613c8ff5">More...</a><br /></td></tr>
<tr class="separator:a7b9dd547669d807c226857f2613c8ff5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4de5e8a5fe28d952339fc33396527a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="func_8h.html#ae4de5e8a5fe28d952339fc33396527a9">wasmtime_func_new_unchecked</a> (<a class="el" href="store_8h.html#a98d503c153853bb098689a122109de81">wasmtime_context_t</a> *store, const <a class="el" href="structwasm__functype__t.html">wasm_functype_t</a> *type, <a class="el" href="func_8h.html#a9afb34f17cdd2a7416514a5270e1c746">wasmtime_func_unchecked_callback_t</a> callback, void *env, void(*finalizer)(void *), <a class="el" href="extern_8h.html#ac3661fabd7972df1ade869f17de29dc5">wasmtime_func_t</a> *ret)</td></tr>
<tr class="memdesc:ae4de5e8a5fe28d952339fc33396527a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new host function in the same manner of <a class="el" href="func_8h.html#a7b9dd547669d807c226857f2613c8ff5" title="Creates a new host-defined function.">wasmtime_func_new</a>, but the function-to-call has no type information available at runtime.  <a href="func_8h.html#ae4de5e8a5fe28d952339fc33396527a9">More...</a><br /></td></tr>
<tr class="separator:ae4de5e8a5fe28d952339fc33396527a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb722801d65a87ac4743541624354928"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structwasm__functype__t.html">wasm_functype_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="func_8h.html#afb722801d65a87ac4743541624354928">wasmtime_func_type</a> (const <a class="el" href="store_8h.html#a98d503c153853bb098689a122109de81">wasmtime_context_t</a> *store, const <a class="el" href="extern_8h.html#ac3661fabd7972df1ade869f17de29dc5">wasmtime_func_t</a> *func)</td></tr>
<tr class="memdesc:afb722801d65a87ac4743541624354928"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the type of the function specified.  <a href="func_8h.html#afb722801d65a87ac4743541624354928">More...</a><br /></td></tr>
<tr class="separator:afb722801d65a87ac4743541624354928"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40e120dae88e66151e24e55194dc8dba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8h.html#a6df4cddb88cff2bfdeecf8bba560af2c">wasmtime_error_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="func_8h.html#a40e120dae88e66151e24e55194dc8dba">wasmtime_func_call</a> (<a class="el" href="store_8h.html#a98d503c153853bb098689a122109de81">wasmtime_context_t</a> *store, const <a class="el" href="extern_8h.html#ac3661fabd7972df1ade869f17de29dc5">wasmtime_func_t</a> *func, const <a class="el" href="val_8h.html#a97038492e2cc547de6c95cf597453353">wasmtime_val_t</a> *args, size_t nargs, <a class="el" href="val_8h.html#a97038492e2cc547de6c95cf597453353">wasmtime_val_t</a> *results, size_t nresults, <a class="el" href="structwasm__trap__t.html">wasm_trap_t</a> **trap)</td></tr>
<tr class="memdesc:a40e120dae88e66151e24e55194dc8dba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call a WebAssembly function.  <a href="func_8h.html#a40e120dae88e66151e24e55194dc8dba">More...</a><br /></td></tr>
<tr class="separator:a40e120dae88e66151e24e55194dc8dba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa5553fd9c9493c47735b33fb1c81227"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structwasm__trap__t.html">wasm_trap_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="func_8h.html#afa5553fd9c9493c47735b33fb1c81227">wasmtime_func_call_unchecked</a> (<a class="el" href="store_8h.html#a98d503c153853bb098689a122109de81">wasmtime_context_t</a> *store, const <a class="el" href="extern_8h.html#ac3661fabd7972df1ade869f17de29dc5">wasmtime_func_t</a> *func, <a class="el" href="val_8h.html#a551b6edd7003e8d98ef5d90e54e05c26">wasmtime_val_raw_t</a> *args_and_results)</td></tr>
<tr class="memdesc:afa5553fd9c9493c47735b33fb1c81227"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call a WebAssembly function in an "unchecked" fashion.  <a href="func_8h.html#afa5553fd9c9493c47735b33fb1c81227">More...</a><br /></td></tr>
<tr class="separator:afa5553fd9c9493c47735b33fb1c81227"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeacae7ee2215736307c0951a77d8833"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="func_8h.html#abeacae7ee2215736307c0951a77d8833">wasmtime_caller_export_get</a> (<a class="el" href="func_8h.html#abad1840db69084f226feec107cc23d5e">wasmtime_caller_t</a> *caller, const char *name, size_t name_len, <a class="el" href="extern_8h.html#a30c0c87bc34364cc5f3c5514a268bc14">wasmtime_extern_t</a> *item)</td></tr>
<tr class="memdesc:abeacae7ee2215736307c0951a77d8833"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads a <a class="el" href="extern_8h.html#a30c0c87bc34364cc5f3c5514a268bc14" title="Convenience alias for wasmtime_extern_t.">wasmtime_extern_t</a> from the caller's context.  <a href="func_8h.html#abeacae7ee2215736307c0951a77d8833">More...</a><br /></td></tr>
<tr class="separator:abeacae7ee2215736307c0951a77d8833"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89b944629663a8e879b1ef9bd9b95c80"><td class="memItemLeft" align="right" valign="top"><a id="a89b944629663a8e879b1ef9bd9b95c80" name="a89b944629663a8e879b1ef9bd9b95c80"></a>
<a class="el" href="store_8h.html#a98d503c153853bb098689a122109de81">wasmtime_context_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>wasmtime_caller_context</b> (<a class="el" href="func_8h.html#abad1840db69084f226feec107cc23d5e">wasmtime_caller_t</a> *caller)</td></tr>
<tr class="memdesc:a89b944629663a8e879b1ef9bd9b95c80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the store context of the caller object. <br /></td></tr>
<tr class="separator:a89b944629663a8e879b1ef9bd9b95c80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5934b1cb99ac0e3e601be386cb566527"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="func_8h.html#a5934b1cb99ac0e3e601be386cb566527">wasmtime_func_from_raw</a> (<a class="el" href="store_8h.html#a98d503c153853bb098689a122109de81">wasmtime_context_t</a> *context, size_t raw, <a class="el" href="extern_8h.html#ac3661fabd7972df1ade869f17de29dc5">wasmtime_func_t</a> *ret)</td></tr>
<tr class="memdesc:a5934b1cb99ac0e3e601be386cb566527"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a <code>raw</code> nonzero <code>funcref</code> value from <a class="el" href="val_8h.html#a551b6edd7003e8d98ef5d90e54e05c26" title="Convenience alias for wasmtime_val_raw.">wasmtime_val_raw_t</a> into a <a class="el" href="extern_8h.html#ac3661fabd7972df1ade869f17de29dc5" title="Representation of a function in Wasmtime.">wasmtime_func_t</a>.  <a href="func_8h.html#a5934b1cb99ac0e3e601be386cb566527">More...</a><br /></td></tr>
<tr class="separator:a5934b1cb99ac0e3e601be386cb566527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c4d16ff366dbf4c8f9eeb514b8b946b"><td class="memItemLeft" align="right" valign="top"><a id="a4c4d16ff366dbf4c8f9eeb514b8b946b" name="a4c4d16ff366dbf4c8f9eeb514b8b946b"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><b>wasmtime_func_to_raw</b> (<a class="el" href="store_8h.html#a98d503c153853bb098689a122109de81">wasmtime_context_t</a> *context, const <a class="el" href="extern_8h.html#ac3661fabd7972df1ade869f17de29dc5">wasmtime_func_t</a> *func)</td></tr>
<tr class="memdesc:a4c4d16ff366dbf4c8f9eeb514b8b946b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a <code>func</code> which belongs to <code>context</code> into a <code>usize</code> parameter that is suitable for insertion into a <a class="el" href="val_8h.html#a551b6edd7003e8d98ef5d90e54e05c26" title="Convenience alias for wasmtime_val_raw.">wasmtime_val_raw_t</a>. <br /></td></tr>
<tr class="separator:a4c4d16ff366dbf4c8f9eeb514b8b946b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Wasmtime definitions of how to interact with host and wasm functions. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="abad1840db69084f226feec107cc23d5e" name="abad1840db69084f226feec107cc23d5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abad1840db69084f226feec107cc23d5e">&#9670;&nbsp;</a></span>wasmtime_caller_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="func_8h.html#abad1840db69084f226feec107cc23d5e">wasmtime_caller_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Alias to <a class="el" href="structwasmtime__caller.html">wasmtime_caller</a>. </p>
<p >Structure used to learn about the caller of a host-defined function. </p>

</div>
</div>
<a id="af90ff6b594f05f23e381ac16c22b70cf" name="af90ff6b594f05f23e381ac16c22b70cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af90ff6b594f05f23e381ac16c22b70cf">&#9670;&nbsp;</a></span>wasmtime_func_callback_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structwasm__trap__t.html">wasm_trap_t</a> *(* wasmtime_func_callback_t) (void *env, <a class="el" href="func_8h.html#abad1840db69084f226feec107cc23d5e">wasmtime_caller_t</a> *caller, const <a class="el" href="val_8h.html#a97038492e2cc547de6c95cf597453353">wasmtime_val_t</a> *args, size_t nargs, <a class="el" href="val_8h.html#a97038492e2cc547de6c95cf597453353">wasmtime_val_t</a> *results, size_t nresults)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback signature for <a class="el" href="func_8h.html#a7b9dd547669d807c226857f2613c8ff5" title="Creates a new host-defined function.">wasmtime_func_new</a>. </p>
<p >This is the function signature for host functions that can be made accessible to WebAssembly. The arguments to this function are:</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>user-provided argument passed to <a class="el" href="func_8h.html#a7b9dd547669d807c226857f2613c8ff5" title="Creates a new host-defined function.">wasmtime_func_new</a> </td></tr>
    <tr><td class="paramname">caller</td><td>a temporary object that can only be used during this function call. Used to acquire <a class="el" href="store_8h.html#a98d503c153853bb098689a122109de81" title="Convenience alias for wasmtime_context.">wasmtime_context_t</a> or caller's state </td></tr>
    <tr><td class="paramname">args</td><td>the arguments provided to this function invocation </td></tr>
    <tr><td class="paramname">nargs</td><td>how many arguments are provided </td></tr>
    <tr><td class="paramname">results</td><td>where to write the results of this function </td></tr>
    <tr><td class="paramname">nresults</td><td>how many results must be produced</td></tr>
  </table>
  </dd>
</dl>
<p>Callbacks are guaranteed to get called with the right types of arguments, but they must produce the correct number and types of results. Failure to do so will cause traps to get raised on the wasm side.</p>
<p >This callback can optionally return a <a class="el" href="structwasm__trap__t.html" title="Opaque struct representing a wasm trap.">wasm_trap_t</a> indicating that a trap should be raised in WebAssembly. It's expected that in this case the caller relinquishes ownership of the trap and it is passed back to the engine. </p>

</div>
</div>
<a id="a9afb34f17cdd2a7416514a5270e1c746" name="a9afb34f17cdd2a7416514a5270e1c746"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9afb34f17cdd2a7416514a5270e1c746">&#9670;&nbsp;</a></span>wasmtime_func_unchecked_callback_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structwasm__trap__t.html">wasm_trap_t</a> *(* wasmtime_func_unchecked_callback_t) (void *env, <a class="el" href="func_8h.html#abad1840db69084f226feec107cc23d5e">wasmtime_caller_t</a> *caller, <a class="el" href="val_8h.html#a551b6edd7003e8d98ef5d90e54e05c26">wasmtime_val_raw_t</a> *args_and_results, size_t num_args_and_results)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback signature for <a class="el" href="func_8h.html#ae4de5e8a5fe28d952339fc33396527a9" title="Creates a new host function in the same manner of wasmtime_func_new, but the function-to-call has no ...">wasmtime_func_new_unchecked</a>. </p>
<p >This is the function signature for host functions that can be made accessible to WebAssembly. The arguments to this function are:</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>user-provided argument passed to <a class="el" href="func_8h.html#ae4de5e8a5fe28d952339fc33396527a9" title="Creates a new host function in the same manner of wasmtime_func_new, but the function-to-call has no ...">wasmtime_func_new_unchecked</a> </td></tr>
    <tr><td class="paramname">caller</td><td>a temporary object that can only be used during this function call. Used to acquire <a class="el" href="store_8h.html#a98d503c153853bb098689a122109de81" title="Convenience alias for wasmtime_context.">wasmtime_context_t</a> or caller's state </td></tr>
    <tr><td class="paramname">args_and_results</td><td>storage space for both the parameters to the function as well as the results of the function. The size of this array depends on the function type that the host function is created with, but it will be the maximum of the number of parameters and number of results. </td></tr>
    <tr><td class="paramname">num_args_and_results</td><td>the size of the <code>args_and_results</code> parameter in units of <a class="el" href="val_8h.html#a551b6edd7003e8d98ef5d90e54e05c26" title="Convenience alias for wasmtime_val_raw.">wasmtime_val_raw_t</a>.</td></tr>
  </table>
  </dd>
</dl>
<p>This callback can optionally return a <a class="el" href="structwasm__trap__t.html" title="Opaque struct representing a wasm trap.">wasm_trap_t</a> indicating that a trap should be raised in WebAssembly. It's expected that in this case the caller relinquishes ownership of the trap and it is passed back to the engine.</p>
<p >This differs from <a class="el" href="func_8h.html#af90ff6b594f05f23e381ac16c22b70cf" title="Callback signature for wasmtime_func_new.">wasmtime_func_callback_t</a> in that the payload of <code>args_and_results</code> does not have type information, nor does it have sizing information. This is especially unsafe because it's only valid within the particular <a class="el" href="structwasm__functype__t.html" title="An opaque object representing the type of a function.">wasm_functype_t</a> that the function was created with. The onus is on the embedder to ensure that <code>args_and_results</code> are all read correctly for parameters and all written for results within the execution of a function.</p>
<p >Parameters will be listed starting at index 0 in the <code>args_and_results</code> array. Results are also written starting at index 0, which will overwrite the arguments. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abeacae7ee2215736307c0951a77d8833" name="abeacae7ee2215736307c0951a77d8833"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeacae7ee2215736307c0951a77d8833">&#9670;&nbsp;</a></span>wasmtime_caller_export_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool wasmtime_caller_export_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="func_8h.html#abad1840db69084f226feec107cc23d5e">wasmtime_caller_t</a> *&#160;</td>
          <td class="paramname"><em>caller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>name_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="extern_8h.html#a30c0c87bc34364cc5f3c5514a268bc14">wasmtime_extern_t</a> *&#160;</td>
          <td class="paramname"><em>item</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads a <a class="el" href="extern_8h.html#a30c0c87bc34364cc5f3c5514a268bc14" title="Convenience alias for wasmtime_extern_t.">wasmtime_extern_t</a> from the caller's context. </p>
<p >This function will attempt to look up the export named <code>name</code> on the caller instance provided. If it is found then the <a class="el" href="extern_8h.html#a30c0c87bc34364cc5f3c5514a268bc14" title="Convenience alias for wasmtime_extern_t.">wasmtime_extern_t</a> for that is returned, otherwise <code>NULL</code> is returned.</p>
<p >Note that this only works for exported memories right now for WASI compatibility.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">caller</td><td>the caller object to look up the export from </td></tr>
    <tr><td class="paramname">name</td><td>the name that's being looked up </td></tr>
    <tr><td class="paramname">name_len</td><td>the byte length of <code>name</code> </td></tr>
    <tr><td class="paramname">item</td><td>where to store the return value</td></tr>
  </table>
  </dd>
</dl>
<p>Returns a nonzero value if the export was found, or 0 if the export wasn't found. If the export wasn't found then <code>item</code> isn't written to. </p>

</div>
</div>
<a id="a40e120dae88e66151e24e55194dc8dba" name="a40e120dae88e66151e24e55194dc8dba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40e120dae88e66151e24e55194dc8dba">&#9670;&nbsp;</a></span>wasmtime_func_call()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8h.html#a6df4cddb88cff2bfdeecf8bba560af2c">wasmtime_error_t</a> * wasmtime_func_call </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="store_8h.html#a98d503c153853bb098689a122109de81">wasmtime_context_t</a> *&#160;</td>
          <td class="paramname"><em>store</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="extern_8h.html#ac3661fabd7972df1ade869f17de29dc5">wasmtime_func_t</a> *&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="val_8h.html#a97038492e2cc547de6c95cf597453353">wasmtime_val_t</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nargs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="val_8h.html#a97038492e2cc547de6c95cf597453353">wasmtime_val_t</a> *&#160;</td>
          <td class="paramname"><em>results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nresults</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structwasm__trap__t.html">wasm_trap_t</a> **&#160;</td>
          <td class="paramname"><em>trap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call a WebAssembly function. </p>
<p >This function is used to invoke a function defined within a store. For example this might be used after extracting a function from a <a class="el" href="instance_8h.html#ac0398434f88148fd429f3f0185199875" title="Representation of a instance in Wasmtime.">wasmtime_instance_t</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">store</td><td>the store which owns <code>func</code> </td></tr>
    <tr><td class="paramname">func</td><td>the function to call </td></tr>
    <tr><td class="paramname">args</td><td>the arguments to the function call </td></tr>
    <tr><td class="paramname">nargs</td><td>the number of arguments provided </td></tr>
    <tr><td class="paramname">results</td><td>where to write the results of the function call </td></tr>
    <tr><td class="paramname">nresults</td><td>the number of results expected </td></tr>
    <tr><td class="paramname">trap</td><td>where to store a trap, if one happens.</td></tr>
  </table>
  </dd>
</dl>
<p>There are three possible return states from this function:</p>
<ol type="1">
<li>The returned error is non-null. This means <code>results</code> wasn't written to and <code>trap</code> will have <code>NULL</code> written to it. This state means that programmer error happened when calling the function, for example when the size of the arguments/results was wrong, the types of the arguments were wrong, or arguments may come from the wrong store.</li>
<li>The trap pointer is filled in. This means the returned error is <code>NULL</code> and <code>results</code> was not written to. This state means that the function was executing but hit a wasm trap while executing.</li>
<li>The error and trap returned are both <code>NULL</code> and <code>results</code> are written to. This means that the function call succeeded and the specified results were produced.</li>
</ol>
<p >The <code>trap</code> pointer cannot be <code>NULL</code>. The <code>args</code> and <code>results</code> pointers may be <code>NULL</code> if the corresponding length is zero.</p>
<p >Does not take ownership of <a class="el" href="val_8h.html#a97038492e2cc547de6c95cf597453353" title="Convenience alias for wasmtime_val_t.">wasmtime_val_t</a> arguments. Gives ownership of <a class="el" href="val_8h.html#a97038492e2cc547de6c95cf597453353" title="Convenience alias for wasmtime_val_t.">wasmtime_val_t</a> results. </p>

</div>
</div>
<a id="afa5553fd9c9493c47735b33fb1c81227" name="afa5553fd9c9493c47735b33fb1c81227"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa5553fd9c9493c47735b33fb1c81227">&#9670;&nbsp;</a></span>wasmtime_func_call_unchecked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structwasm__trap__t.html">wasm_trap_t</a> * wasmtime_func_call_unchecked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="store_8h.html#a98d503c153853bb098689a122109de81">wasmtime_context_t</a> *&#160;</td>
          <td class="paramname"><em>store</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="extern_8h.html#ac3661fabd7972df1ade869f17de29dc5">wasmtime_func_t</a> *&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="val_8h.html#a551b6edd7003e8d98ef5d90e54e05c26">wasmtime_val_raw_t</a> *&#160;</td>
          <td class="paramname"><em>args_and_results</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call a WebAssembly function in an "unchecked" fashion. </p>
<p >This function is similar to <a class="el" href="func_8h.html#a40e120dae88e66151e24e55194dc8dba" title="Call a WebAssembly function.">wasmtime_func_call</a> except that there is no type information provided with the arguments (or sizing information). Consequently this is less safe to call since it's up to the caller to ensure that <code>args</code> has an appropriate size and all the parameters are configured with their appropriate values/types. Additionally all the results must be interpreted correctly if this function returns successfully.</p>
<p >Parameters must be specified starting at index 0 in the <code>args_and_results</code> array. Results are written starting at index 0, which will overwrite the arguments.</p>
<p >Callers must ensure that various correctness variants are upheld when this API is called such as:</p>
<ul>
<li>The <code>args_and_results</code> pointer has enough space to hold all the parameters and all the results (but not at the same time).</li>
<li>Parameters must all be configured as if they were the correct type.</li>
<li>Values such as <code>externref</code> and <code>funcref</code> are valid within the store being called.</li>
</ul>
<p >When in doubt it's much safer to call <a class="el" href="func_8h.html#a40e120dae88e66151e24e55194dc8dba" title="Call a WebAssembly function.">wasmtime_func_call</a>. This function is faster than that function, but the tradeoff is that embeddings must uphold more invariants rather than relying on Wasmtime to check them for you. </p>

</div>
</div>
<a id="a5934b1cb99ac0e3e601be386cb566527" name="a5934b1cb99ac0e3e601be386cb566527"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5934b1cb99ac0e3e601be386cb566527">&#9670;&nbsp;</a></span>wasmtime_func_from_raw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wasmtime_func_from_raw </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="store_8h.html#a98d503c153853bb098689a122109de81">wasmtime_context_t</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="extern_8h.html#ac3661fabd7972df1ade869f17de29dc5">wasmtime_func_t</a> *&#160;</td>
          <td class="paramname"><em>ret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts a <code>raw</code> nonzero <code>funcref</code> value from <a class="el" href="val_8h.html#a551b6edd7003e8d98ef5d90e54e05c26" title="Convenience alias for wasmtime_val_raw.">wasmtime_val_raw_t</a> into a <a class="el" href="extern_8h.html#ac3661fabd7972df1ade869f17de29dc5" title="Representation of a function in Wasmtime.">wasmtime_func_t</a>. </p>
<p >This function can be used to interpret nonzero values of the <code>funcref</code> field of the <a class="el" href="val_8h.html#a551b6edd7003e8d98ef5d90e54e05c26" title="Convenience alias for wasmtime_val_raw.">wasmtime_val_raw_t</a> structure. It is assumed that <code>raw</code> does not have a value of 0, or otherwise the program will abort.</p>
<p >Note that this function is unchecked and unsafe. It's only safe to pass values learned from <a class="el" href="val_8h.html#a551b6edd7003e8d98ef5d90e54e05c26" title="Convenience alias for wasmtime_val_raw.">wasmtime_val_raw_t</a> with the same corresponding <a class="el" href="store_8h.html#a98d503c153853bb098689a122109de81" title="Convenience alias for wasmtime_context.">wasmtime_context_t</a> that they were produced from. Providing arbitrary values to <code>raw</code> here or cross-context values with <code>context</code> is UB. </p>

</div>
</div>
<a id="a7b9dd547669d807c226857f2613c8ff5" name="a7b9dd547669d807c226857f2613c8ff5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b9dd547669d807c226857f2613c8ff5">&#9670;&nbsp;</a></span>wasmtime_func_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wasmtime_func_new </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="store_8h.html#a98d503c153853bb098689a122109de81">wasmtime_context_t</a> *&#160;</td>
          <td class="paramname"><em>store</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structwasm__functype__t.html">wasm_functype_t</a> *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="func_8h.html#af90ff6b594f05f23e381ac16c22b70cf">wasmtime_func_callback_t</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *)&#160;</td>
          <td class="paramname"><em>finalizer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="extern_8h.html#ac3661fabd7972df1ade869f17de29dc5">wasmtime_func_t</a> *&#160;</td>
          <td class="paramname"><em>ret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new host-defined function. </p>
<p >Inserts a host-defined function into the <code>store</code> provided which can be used to then instantiate a module with or define within a <a class="el" href="linker_8h.html#adcd278d48fae4abd464e95b98889104b" title="Alias to wasmtime_linker.">wasmtime_linker_t</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">store</td><td>the store in which to create the function </td></tr>
    <tr><td class="paramname">type</td><td>the wasm type of the function that's being created </td></tr>
    <tr><td class="paramname">callback</td><td>the host-defined callback to invoke </td></tr>
    <tr><td class="paramname">env</td><td>host-specific data passed to the callback invocation, can be <code>NULL</code> </td></tr>
    <tr><td class="paramname">finalizer</td><td>optional finalizer for <code>env</code>, can be <code>NULL</code> </td></tr>
    <tr><td class="paramname">ret</td><td>the <a class="el" href="extern_8h.html#ac3661fabd7972df1ade869f17de29dc5" title="Representation of a function in Wasmtime.">wasmtime_func_t</a> return value to be filled in.</td></tr>
  </table>
  </dd>
</dl>
<p>The returned function can only be used with the specified <code>store</code>. </p>

</div>
</div>
<a id="ae4de5e8a5fe28d952339fc33396527a9" name="ae4de5e8a5fe28d952339fc33396527a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4de5e8a5fe28d952339fc33396527a9">&#9670;&nbsp;</a></span>wasmtime_func_new_unchecked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wasmtime_func_new_unchecked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="store_8h.html#a98d503c153853bb098689a122109de81">wasmtime_context_t</a> *&#160;</td>
          <td class="paramname"><em>store</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structwasm__functype__t.html">wasm_functype_t</a> *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="func_8h.html#a9afb34f17cdd2a7416514a5270e1c746">wasmtime_func_unchecked_callback_t</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *)&#160;</td>
          <td class="paramname"><em>finalizer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="extern_8h.html#ac3661fabd7972df1ade869f17de29dc5">wasmtime_func_t</a> *&#160;</td>
          <td class="paramname"><em>ret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new host function in the same manner of <a class="el" href="func_8h.html#a7b9dd547669d807c226857f2613c8ff5" title="Creates a new host-defined function.">wasmtime_func_new</a>, but the function-to-call has no type information available at runtime. </p>
<p >This function is very similar to <a class="el" href="func_8h.html#a7b9dd547669d807c226857f2613c8ff5" title="Creates a new host-defined function.">wasmtime_func_new</a>. The difference is that this version is "more unsafe" in that when the host callback is invoked there is no type information and no checks that the right types of values are produced. The onus is on the consumer of this API to ensure that all invariants are upheld such as:</p>
<ul>
<li>The host callback reads parameters correctly and interprets their types correctly.</li>
<li>If a trap doesn't happen then all results are written to the results pointer. All results must have the correct type.</li>
<li>Types such as <code>funcref</code> cannot cross stores.</li>
<li>Types such as <code>externref</code> have valid reference counts.</li>
</ul>
<p >It's generally only recommended to use this if your application can wrap this in a safe embedding. This should not be frequently used due to the number of invariants that must be upheld on the wasm&lt;-&gt;host boundary. On the upside, though, this flavor of host function will be faster to call than those created by <a class="el" href="func_8h.html#a7b9dd547669d807c226857f2613c8ff5" title="Creates a new host-defined function.">wasmtime_func_new</a> (hence the reason for this function's existence). </p>

</div>
</div>
<a id="afb722801d65a87ac4743541624354928" name="afb722801d65a87ac4743541624354928"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb722801d65a87ac4743541624354928">&#9670;&nbsp;</a></span>wasmtime_func_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structwasm__functype__t.html">wasm_functype_t</a> * wasmtime_func_type </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="store_8h.html#a98d503c153853bb098689a122109de81">wasmtime_context_t</a> *&#160;</td>
          <td class="paramname"><em>store</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="extern_8h.html#ac3661fabd7972df1ade869f17de29dc5">wasmtime_func_t</a> *&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the type of the function specified. </p>
<p >The returned <a class="el" href="structwasm__functype__t.html" title="An opaque object representing the type of a function.">wasm_functype_t</a> is owned by the caller. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_b0e440e2d445bbd46353ed1b6699c971.html">wasmtime</a></li><li class="navelem"><a class="el" href="func_8h.html">func.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
